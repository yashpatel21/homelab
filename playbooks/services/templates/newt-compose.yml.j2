services:
  newt:
    image: fosrl/newt:1.4.0
    container_name: newt
    restart: unless-stopped
    environment:
      - PANGOLIN_ENDPOINT={{ vault_pangolin_endpoint }}
      - NEWT_ID={{ vault_newt_id }}
      - NEWT_SECRET={{ vault_newt_secret }}
    networks:
      - {{ homelab_network_name }}
    labels:
      # WUD update notifications - Major/Minor only with semantic versioning
      - "wud.watch=true"
      - "wud.tag.include=^\\d+\\.\\d+\\.\\d+$"
      - "wud.tag.exclude=alpha|beta|rc|dev"
      - "wud.trigger.include=command.ntfy"
      - "wud.display.name=Newt"
      - "wud.link.template=https://github.com/fosrl/newt/releases/tag/$${raw}"

networks:
  {{ homelab_network_name }}:
    external: true 